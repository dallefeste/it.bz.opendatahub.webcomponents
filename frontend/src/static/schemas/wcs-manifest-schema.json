{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "$id": "https://webcomponents.opendatahub.bz.it/schemas/v1/wcs-manifest",
    "title": "WcsManifest",
	"type": "object",
	"additionalProperties": false,
    "definitions": {
		"configurationItem": {
			"type": "object",
			"properties": {
				"key": {
					"type": "string"
				},
				"label": {
					"type": "string"
				},
				"required": {
					"type": "boolean"
				}
			},
			"required": [
				"key",
				"type"
			],
			"additionalProperties": false
		},
        "entityOrPerson": {
            "type": "object",
            "properties": {
				"name": {
					"type": "string"
				},
				"email": {
					"type": "string"
				},
				"organization": {
					"type": "string"
				},
				"organizationUrl": {
					"type": "string",
					"format": "uri"
				}
			},
			"required": [
				"name",
				"email"
			],
			"additionalProperties": false
		},
		"stringArray": {
            "type": "array",
            "items": {
				"type": "string"
			},
			"uniqueItems": true,
			"minimum": 1,
			"default": []
		},
		"dist": {
			"type": "object",
			"properties": {
				"basePath": {
					"type": "string"
				},
				"files": {
					"$ref": "#/definitions/stringArray"
				}
			},
			"required": [
				"basePath",
				"files"
			],
			"additionalProperties": false
		},
		"configuration": {
			"type": "object",
			"properties": {
				"tagName": {
					"type": "string"
				},
				"options": {
					"type": "array",
					"items": { "$ref": "#/definitions/configurationItems" },
					"uniqueItems": true,
					"minimum": 0,
					"default": []
				}
			},
			"required": [
				"tagName"
			],
			"additionalProperties": false
		},
		"configurationItems": {
			"anyOf": [
				{
					"type": "object",
					"properties": {
						"type": {
							"enum": [
								"null",
								"bool"
							]
						},
						"key": {
							"type": "string"
						},
						"label": {
							"type": "string"
						},
						"required": {
							"type": "boolean"
						},
						"options": {
							"type": "object",
							"properties": {
								"default": {
									"type": "boolean"
								}
							},
							"additionalProperties": false
						}
					},
					"required": [
						"key",
						"type",
						"options"
					],
					"additionalProperties": false
				},
				{
					"type": "object",
					"properties": {
						"type": {
							"const": "number"
						},
						"key": {
							"type": "string"
						},
						"label": {
							"type": "string"
						},
						"required": {
							"type": "boolean"
						},
						"options": {
							"type": "object",
							"properties": {
								"default": {
									"type": "number"
								},
								"min": {
									"type": "number"
								},
								"max": {
									"type": "number"
								},
								"step": {
									"type": "number"
								}
							},
							"additionalProperties": false
						}
					},
					"required": [
						"key",
						"type",
						"options"
					],
					"additionalProperties": false
				},
				{
					"type": "object",
					"properties": {
						"key": {
							"type": "string"
						},
						"type": {
							"type": "string",
							"enum": [
								"text",
								"textarea"
							]
						},
						"label": {
							"type": "string"
						},
						"required": {
							"type": "boolean"
						},
						"options": {
							"type": "object",
							"properties": {
								"default": {
									"type": "string"
								}
							},
							"required": [
								"default"
							],
							"additionalProperties": false
						}
					},
					"required": [
						"key",
						"type",
						"options"
					],
					"additionalProperties": false
				},
				{
					"type": "object",
					"properties": {
						"key": {
							"type": "string"
						},
						"type": {
							"type": "string",
							"enum": [
								"select",
								"multiselect"
							]
						},
						"label": {
							"type": "string"
						},
						"required": {
							"type": "boolean"
						},
						"options": {
							"type": "object",
							"properties": {
								"values": {
									"type": "array",
									"items": {
										"type": "string"
									},
									"uniqueItems": true,
									"minimum": 1
								},
								"default": {
									"type": "string",
									"validDefault": {
										"$data": "2/values"
									}
								}
							},
							"required": [
								"values"
							],
							"additionalProperties": false
						}
					},
					"required": [
						"key",
						"type",
						"options"
					],
					"additionalProperties": false
				},
				{
					"type": "object",
					"properties": {
						"key": {
							"type": "string"
						},
						"type": {
							"type": "string",
							"const": "object"
						},
						"label": {
							"type": "string"
						},
						"required": {
							"type": "boolean"
						},
						"options": {
							"type": "object",
							"properties": {
								"placeholder": {
									"type": "object"
								},
								"default": {
									"type": "object"
								}
							},
							"additionalProperties": false
						}
					},
					"required": [
						"key",
						"type",
						"options"
					],
					"additionalProperties": false
				}
			]
		}
	},
    "properties": {
        "title": {
			"type": "string"
        },
        "description": {
			"type": "string"
		},
        "descriptionAbstract": {
			"type": "string"
		},
        "license": {
			"type": "string"
		},
        "copyrightHolders": {
            "type": "array",
            "minItems": 1,
            "items": {
				"$ref": "#/definitions/entityOrPerson"
			},
            "uniqueItems": true
		},
        "authors": {
			"type": "array",
            "minItems": 1,
			"items": {
				"$ref": "#/definitions/entityOrPerson"
			},
            "uniqueItems": true
		},
        "image": {
			"type": "string"
		},
        "searchTags": {
			"$ref": "#/definitions/stringArray"
		},
        "dist": {
			"$ref": "#/definitions/dist"
		},
        "configuration": {
			"$ref": "#/definitions/configuration"
		}
    },
    "required": [
		"title",
        "description",
        "descriptionAbstract",
        "license",
        "copyrightHolders",
        "authors",
        "image",
        "searchTags",
        "dist",
        "configuration"
    ]
}
